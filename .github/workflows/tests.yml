---

name: Tests

on:
  push:
    branches:
      - '*.*'
  pull_request:
    branches:
      - '*.*'

jobs:
  pospell:
    name: 'Orthographe'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install pospell
        run: |
          sudo apt-get update
          sudo apt-get install -y hunspell hunspell-fr-comprehensive
          sudo python3 -m pip install pospell
      - name: Run pospell
        run: pospell -p dict -l fr_FR *.po */*.po

  powrap:
    name: 'Ensure wrapping consistency'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install powrap
        run: sudo python3 -m pip install powrap
      - name: Run powrap
        run: powrap --check --quiet *.po */*.po

  padpo:
    name: 'Grammaire'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install padpo
        run: sudo python3 -m pip install padpo
      - name: Run padpo
        run: padpo -i *.po */*.po 2>&1 | grep -v -Ff padpo.ignore

  sphinx:
    name: 'Build the doc'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: make
